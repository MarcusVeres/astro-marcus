---
import BaseLayout from './BaseLayout.astro'

const { frontmatter } = Astro.props;
---
<BaseLayout pageTitle = { frontmatter.title }>
    <div class="prose bg-gray-900">
        <div class="prose-content">
            <!-- Optional: Add category/tag as intro -->
            {frontmatter.tags && frontmatter.tags.length > 0 && (
                <p class="font-semibold text-indigo-400 text-base/7">{frontmatter.tags[0]}</p>
            )}

            <!-- Main title -->
            <h1>{frontmatter.title}</h1>

            <!-- Meta information -->
            <p class="text-gray-400 text-sm mt-4">
                Published on {frontmatter.pubDate.toDateString()} by {frontmatter.author}
            </p>

            <!-- Description/excerpt as lead paragraph -->
            {frontmatter.description && (
                <p class="text-xl/8">{frontmatter.description}</p>
            )}

            <!-- Hero image if available -->
            {frontmatter.image && (
                <figure class="mt-10">
                    <img src={frontmatter.image.url} alt={frontmatter.image.alt} class="w-full aspect-video object-cover bg-gray-800 rounded-xl" />
                </figure>
            )}

            <!-- Main content -->
            <div class="max-w-2xl mt-10">
                <slot />
            </div>

            <!-- Tags at bottom -->
            {frontmatter.tags && frontmatter.tags.length > 0 && (
                <div class="mt-16 pt-8 border-t border-gray-700">
                    <p class="text-sm font-semibold text-gray-400 mb-4">Tagged with:</p>
                    <ul class="flex flex-wrap gap-2 list-none mt-0 space-y-0">
                        {frontmatter.tags.map((tag) => (
                            <li class="m-0">
                                <a href={`/tags/${tag}`} class="inline-block px-3 py-1 text-sm bg-indigo-500/10 text-indigo-400 rounded-full border border-indigo-500/20 hover:bg-indigo-500/20 no-underline transition-colors">
                                    {tag}
                                </a>
                            </li>
                        ))}
                    </ul>
                </div>
            )}
        </div>
    </div>
</BaseLayout>